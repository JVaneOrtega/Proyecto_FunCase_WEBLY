@model IdentitySample.Models.IndexViewModel
@if (User.IsInRole("Admin") || User.IsInRole("Empleado"))
{
    ViewBag.Title = "Administra tu cuenta";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";


    <div class="page-heading">
        <div class="page-title">
            <div class="row">
                <div class="col-12 col-md-6 order-md-1 order-last">
                    <h3>Administrar cuenta</h3>
                    <p class="text-subtitle text-muted">Modifica y consulta tu cuenta.</p>
                </div>
                <div class="col-12 col-md-6 order-md-2 order-first">
                    <nav aria-label="breadcrumb" class="breadcrumb-header float-start float-lg-end float-md-end float-sm-end">
                        <ol class="breadcrumb breadcrumb-right">
                            <li class="breadcrumb-item"><a href="@Url.Action("IndexAdmin", "Home")">Dashboard</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Cuenta</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <div class="page-content">
        <section class="section">
            <div class="row match-height">
                <div class="col-md-8">
                    <p>
                        @(Model.HasPassword ? Html.ActionLink("Cambia tu contraseña", "ChangePassword")
                : Html.ActionLink("Guarda una contraseña", "SetPassword"))
                    </p>
                    <p>
                        Phone Number: @(Model.PhoneNumber ?? "None") [
                        @if (Model.PhoneNumber != null)
                        {
                            @Html.ActionLink("Cambiar", "AddPhoneNumber")
                            @: &nbsp;|&nbsp;
                            @Html.ActionLink("Quitar", "RemovePhoneNumber")
                        }
                        else
                        {
                            @Html.ActionLink("Agregar", "AddPhoneNumber")
                        }
                        ]
                    </p>
                    <p>
                        Inicios de Sesión Externos: @Model.Logins.Count
                        @Html.ActionLink("[Manage]", "ManageLogins")
                    </p>
                    @if (Model.TwoFactor)
                    {
                        using (Html.BeginForm("DisableTFA", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <p>
                                Two factor esta habilitado:
                                <button type="submit" class="btn btn-primary">Deshabilitar</button>
                            </p>
                        }
                    }
                    else
                    {
                        using (Html.BeginForm("EnableTFA", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <p>
                                Two factor está deshabilitado:
                                <button type="submit" class="btn btn-primary">Habilitar</button>
                            </p>
                        }
                    }
                    @if (Model.BrowserRemembered)
                    {
                        using (Html.BeginForm("ForgetBrowser", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <p>
                                El navegador esta recordado por two factor:
                                <button type="submit" class="btn btn-primary">Olvidar navegador</button>
                            </p>
                        }
                    }
                    else
                    {
                        using (Html.BeginForm("RememberBrowser", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <p>
                                El navegador no es recordado por two factor:
                                <button type="submit" class="btn btn-primary">Recordar navegador</button>
                            </p>
                        }
                    }
                </div>
            </div>
        </section>
    </div>
}
else
{
    ViewBag.Title = "Administra tu cuenta";

    <h2>@ViewBag.Title.</h2>
    <p class="text-success">@ViewBag.StatusMessage</p>
    <div class="row">
        <div class="col-md-8">
            <p>
                @(Model.HasPassword ? Html.ActionLink("Cambia tu contraseña", "ChangePassword")
                : Html.ActionLink("Guarda una contraseña", "SetPassword"))
            </p>
            <p>
                Phone Number: @(Model.PhoneNumber ?? "None") [
                @if (Model.PhoneNumber != null)
                {
                    @Html.ActionLink("Cambiar", "AddPhoneNumber")
                    @: &nbsp;|&nbsp;
                    @Html.ActionLink("Quitar", "RemovePhoneNumber")
                }
                else
                {
                    @Html.ActionLink("Agregar", "AddPhoneNumber")
                }
                ]
            </p>
            <p>
                Inicios de Sesión Externos: @Model.Logins.Count
                @Html.ActionLink("[Manage]", "ManageLogins")
            </p>
            @if (Model.TwoFactor)
            {
                using (Html.BeginForm("DisableTFA", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <p>
                        Two factor esta habilitado:
                        <button type="submit" class="btn btn-primary">Deshabilitar</button>
                    </p>
                }
            }
            else
            {
                using (Html.BeginForm("EnableTFA", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <p>
                        Two factor está deshabilitado:
                        <button type="submit" class="btn btn-primary">Habilitar</button>
                    </p>
                }
            }
            @if (Model.BrowserRemembered)
            {
                using (Html.BeginForm("ForgetBrowser", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <p>
                        El navegador esta recordado por two factor:
                        <button type="submit" class="btn btn-primary">Olvidar navegador</button>
                    </p>
                }
            }
            else
            {
                using (Html.BeginForm("RememberBrowser", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <p>
                        El navegador no es recordado por two factor:
                        <button type="submit" class="btn btn-primary">Recordar navegador</button>
                    </p>
                }
            }
        </div>
    </div>
}
